--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 6.1.792
--   Created On : Friday, 15 September, 2006 
--   DBMS       : SQL Server 2000 
--   -------------------------------------------------- 

IF EXISTS (SELECT * FROM dbo.SYSOBJECTS WHERE id = object_id('linkme_owner.Purchase') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE linkme_owner.Purchase
GO

CREATE TABLE linkme_owner.Purchase ( 
	id uniqueidentifier NOT NULL,
	dateTime datetime NOT NULL,
	invoiceNumber int NOT NULL,
	subTotalExGst money NOT NULL,
	gstAmount money NOT NULL,
	purchaserId varchar(50) NOT NULL,
	paymentId uniqueidentifier NOT NULL,
	processedByAdministratorId varchar(50)
)
GO

ALTER TABLE linkme_owner.Purchase
	ADD CONSTRAINT UQ_Purchase_invoiceNumber UNIQUE (invoiceNumber)
GO

ALTER TABLE linkme_owner.Purchase
	ADD CONSTRAINT UQ_Purchase_paymentId UNIQUE (paymentId)
GO

ALTER TABLE linkme_owner.Purchase ADD CONSTRAINT PK_Purchase 
	PRIMARY KEY (id)
GO

ALTER TABLE linkme_owner.Purchase ADD CONSTRAINT FK_Purchase_Payment 
	FOREIGN KEY (paymentId) REFERENCES linkme_owner.Payment (id)
GO

ALTER TABLE linkme_owner.Purchase ADD CONSTRAINT FK_Purchase_administrator_profile 
	FOREIGN KEY (processedByAdministratorId) REFERENCES linkme_owner.administrator_profile (id)
GO

ALTER TABLE linkme_owner.Purchase ADD CONSTRAINT FK_Purchase_user_profile 
	FOREIGN KEY (purchaserId) REFERENCES linkme_owner.user_profile (id)
GO









