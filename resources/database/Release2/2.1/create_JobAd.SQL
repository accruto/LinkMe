--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 6.1.792
--   Created On : Thursday, 14 September, 2006 
--   DBMS       : SQL Server 2000 
--   -------------------------------------------------- 

IF EXISTS (SELECT * FROM dbo.SYSOBJECTS WHERE id = object_id('linkme_owner.JobAd') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE linkme_owner.JobAd
GO

CREATE TABLE linkme_owner.JobAd ( 
	id uniqueidentifier NOT NULL,
	bulletPoints nvarchar(300),
	content ntext NOT NULL,
	employerCompanyName nvarchar(100),
	expiryTime datetime NOT NULL,
	externalReferenceId varchar(20),
	internalReferenceId int NOT NULL,
	jobTypes tinyint NOT NULL,
	lastUpdatedTime datetime NOT NULL,
	location nvarchar(200),
	maxSalary money,
	minSalary money,
	packageDetails nvarchar(200),
	postcode varchar(6),
	residencyRequired bit NOT NULL,
	status tinyint NOT NULL,
	summary nvarchar(300),
	title nvarchar(200) NOT NULL,    --  Note that this is the AD title, not the JOB title (which would be a separate field, but is currently not captured). 
	brandingLogoImageId uniqueidentifier,
	candidateListId uniqueidentifier NOT NULL,
	contactPersonId uniqueidentifier NOT NULL,
	contactDetailsId uniqueidentifier NOT NULL,
	jobPosterId varchar(50) NOT NULL
)
GO

CREATE INDEX IX_JobAd_JobPoster
ON linkme_owner.JobAd (jobPosterId ASC)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT PK_JobAd 
	PRIMARY KEY (id)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT FK_JobAd_CandidateList 
	FOREIGN KEY (candidateListId) REFERENCES linkme_owner.CandidateList (id)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT FK_JobAd_employer_profile 
	FOREIGN KEY (jobPosterId) REFERENCES linkme_owner.employer_profile (id)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT FK_JobAd_ContactDetails 
	FOREIGN KEY (contactDetailsId) REFERENCES linkme_owner.ContactDetails (id)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT FK_JobAd_Image 
	FOREIGN KEY (brandingLogoImageId) REFERENCES linkme_owner.ImageData (id)
GO

ALTER TABLE linkme_owner.JobAd ADD CONSTRAINT FK_JobAd_Person 
	FOREIGN KEY (contactPersonId) REFERENCES linkme_owner.Person (id)
GO


















EXEC sp_addextendedproperty 'MS_Description', 'Note that this is the AD title, not the JOB title (which would be a separate field, but is currently not captured).', 'User', linkme_owner, 'table', JobAd, 'column', title
GO






