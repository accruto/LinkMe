--  -------------------------------------------------- 
--  Generated by Enterprise Architect Version 7.0.816
--  Created On : Tuesday, 18 September, 2007 
--  DBMS       : SQL Server 2000 
--  -------------------------------------------------- 

IF EXISTS (SELECT * FROM dbo.SYSOBJECTS WHERE id = object_id('Resume') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE Resume
GO

CREATE TABLE Resume ( 
	id uniqueidentifier NOT NULL,
	version int NOT NULL,
	lastEditedTime datetime NULL,    -- NULL if the resume has not been edited since it was uploaded. ParsedFromFile should be non-null in this case. 
	lensXml text NULL,    -- A NULL value means that the resume has been deleted by the user. The row is kept in the table for RI purposes (ResumeSearch and JobApplication). 
	candidateId uniqueidentifier NOT NULL,
	parsedFromFileId uniqueidentifier NULL
)
GO

ALTER TABLE Resume ADD CONSTRAINT PK_Resume 
	PRIMARY KEY CLUSTERED (id)
GO

ALTER TABLE Resume ADD CONSTRAINT FK_Resume_Candidate 
	FOREIGN KEY (candidateId) REFERENCES Candidate (id)
GO

ALTER TABLE Resume ADD CONSTRAINT FK_Resume_ParsedFromFile 
	FOREIGN KEY (parsedFromFileId) REFERENCES CandidateResumeFile (id)
GO



EXEC sp_addextendedproperty 'MS_Description', 'NULL if the resume has not been edited since it was uploaded. ParsedFromFile should be non-null in this case.', 'User', dbo, 'table', Resume, 'column', lastEditedTime
GO

EXEC sp_addextendedproperty 'MS_Description', 'A NULL value means that the resume has been deleted by the user. The row is kept in the table for RI purposes (ResumeSearch and JobApplication).', 'User', dbo, 'table', Resume, 'column', lensXml
GO



